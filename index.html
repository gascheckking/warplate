<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WarpAI | Onchain Tracker</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
  <style>
    :root {
      --primary: #7A5FFF;
      --text: #f1f1f1;
      --bg: #0d0d0d;
      --card: #1a1a1a;
      --accent: #10B981;
      --warning: #F59E0B;
      --danger: #EF4444;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', sans-serif;
      max-width: 440px;
      margin: 0 auto;
      padding: 0 16px 80px;
    }

    header {
      text-align: center;
      padding: 24px 0 16px;
    }

    #brand {
      color: var(--primary);
      font-weight: 700;
      font-size: 1.2rem;
    }

    .tab-section {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .tab-section.active {
      display: block;
    }

    .dashboard {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 20px;
    }

    .action-card {
      background: var(--card);
      border-radius: 12px;
      padding: 14px;
      text-align: center;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .action-card:hover {
      background: #262626;
      transform: translateY(-2px);
    }

    .metric {
      font-size: 0.8rem;
      color: #ccc;
      margin-top: 6px;
      min-height: 18px;
    }

    .progress {
      height: 5px;
      background: #333;
      border-radius: 3px;
      overflow: hidden;
      margin-top: 6px;
    }

    .bar {
      height: 100%;
      transition: width 0.4s ease;
    }

    .overview {
      background: var(--card);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
    }

    nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      max-width: 440px;
      margin: 0 auto;
      display: flex;
      justify-content: space-around;
      background: var(--bg);
      padding: 12px 0;
      border-top: 1px solid #222;
      z-index: 10;
    }

    nav a {
      color: #ccc;
      font-size: 0.85rem;
      text-decoration: none;
      text-align: center;
      transition: all 0.2s ease;
    }

    nav a.active {
      color: var(--primary);
      font-weight: bold;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <header>
    <div id="brand">WarpAI</div>
    <h1 style="font-size: 1.3rem; margin-bottom: 4px;">Onchain Activity</h1>
    <p style="font-size: 0.9rem; color: #ccc;">Track your wallet, XP and gas fees</p>
  </header>

  <main>
    <section id="home" class="tab-section active">
      <div class="dashboard">
        <div class="action-card" onclick="loadGas()">
          <div>👛</div>
          <strong>Wallet</strong>
          <div class="metric" id="gasInfo">Tap to load gas</div>
          <div class="progress">
            <div id="gasBar" class="bar" style="width: 0%; background: var(--accent);"></div>
          </div>
        </div>

        <div class="action-card" onclick="claimXP()">
          <div>🎁</div>
          <strong>Claim</strong>
          <div class="metric" id="xpInfo">Tap to claim</div>
          <div class="progress">
            <div id="xpBar" class="bar" style="width: 0%; background: var(--warning);"></div>
          </div>
        </div>

        <div class="action-card" onclick="showSnapshot()">
          <div>📍</div>
          <strong>Track</strong>
          <div class="metric">Snapshot your XP</div>
          <div class="progress">
            <div class="bar" style="width: 0%; background: var(--primary);"></div>
          </div>
        </div>
      </div>

      <div class="overview">
        <h3>🪙 Warp Token</h3>
        <p>
          <strong>Symbol:</strong> $WARP<br>
          <strong>Contract:</strong> 0x0cd1...0482<br>
          <a href="https://zora.co/collect/base:0x0cd1e9c691af8d4d34efcc089a40b31c691d0482" target="_blank">Buy on Zora</a>
        </p>
      </div>

      <div class="overview">
        <h3>🎖️ Your Rewards</h3>
        <p id="rewardStatus">Connect wallet to check eligibility</p>
        <button onclick="checkToken()">Check Supporter Status</button>
      </div>

      <div class="overview">
        <h3>📊 Overview</h3>
        <p id="overviewText">Your activity will show up here after interacting.</p>
      </div>
    </section>

    <section id="track" class="tab-section">
      <div class="overview">
        <h3>📈 Tracking</h3>
        <p>Transactions: 12<br>Gas: 0.0021 ETH<br>Active Days: 4/7</p>
      </div>
    </section>

    <section id="leader" class="tab-section">
      <div class="overview">
        <h3>🏆 Leaderboard</h3>
        <ol style="padding-left: 20px;">
          <li>@crypto_og – 1420 XP</li>
          <li>@degen – 1205 XP</li>
          <li>@you – 900 XP</li>
        </ol>
      </div>
    </section>

    <section id="profile" class="tab-section">
      <div class="overview">
        <h3>👤 Profile</h3>
        <p>Connect your wallet to view stats</p>
        <button onclick="connectWallet()">Connect Wallet</button>
      </div>
    </section>
  </main>

  <nav>
    <a href="#" onclick="switchTab('home')" class="active">🏠<br>Home</a>
    <a href="#" onclick="switchTab('track')">📈<br>Track</a>
    <a href="#" onclick="switchTab('leader')">🏆<br>Leader</a>
    <a href="#" onclick="switchTab('profile')">👤<br>Profile</a>
  </nav>

  <script>
    function switchTab(id) {
      document.querySelectorAll('.tab-section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
      document.querySelector(`nav a[onclick*="${id}"]`).classList.add('active');
    }

    async function loadGas() {
      try {
        document.getElementById("gasInfo").innerText = "Loading...";
        const res = await fetch('/api/gas');
        const data = await res.json();
        const gwei = data.base.speeds[1]?.gasPrice || 20;
        document.getElementById("gasBar").style.width = "30%";
        document.getElementById("gasInfo").innerHTML = `Fast: ${gwei} Gwei`;
      } catch (e) {
        document.getElementById("gasInfo").innerText = "Error loading";
      }
    }

    async function claimXP() {
      const address = prompt("Enter your wallet address:");
      if (!address) return;
      try {
        document.getElementById("xpInfo").innerText = "Claiming...";
        await new Promise(r => setTimeout(r, 1000));
        document.getElementById("xpBar").style.width = "40%";
        document.getElementById("xpInfo").innerText = "3d | 120 XP";
        document.getElementById("overviewText").innerText = "You claimed 120 XP!";
      } catch (e) {
        document.getElementById("xpInfo").innerText = "Error claiming XP";
      }
    }

    function showSnapshot() {
      const address = prompt("Wallet address for snapshot:");
      if (!address) return;
      alert("Snapshot feature coming soon!");
    }

    function checkToken() {
      const result = Math.random() > 0.5;
      const el = document.getElementById("rewardStatus");
      el.innerText = result ? "✅ Early Supporter detected" : "❌ No Warp token found";
    }

    function connectWallet() {
      const addr = prompt("Enter your wallet address:");
      if (addr) alert(`Connected: ${addr}`);
    }
  </script>
</body>
</html>